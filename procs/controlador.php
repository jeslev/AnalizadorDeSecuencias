<?php
include("MotifsTree.php");


//muestra valores de tablas en formulario de motifs
if(isset($_GET['action']) && !empty($_GET['action']) ){
	$action = $_GET['action'];
	switch ($action) {
		case 'listarMotifs':
			listarMotifs();
			break;		
		default:			
			break;
	}
}

function listarMotifs(){
	$html="<div class=\"col-xs-12\">
    <div class=\"form-group\">  
    <table id=\"tabla_listar\" class=\"table table-striped table-bordered display \" cellspacing=\"0\" width=\"100%\">
        <thead><th> Codigo </th><th> Nombre </th>  <th> Consenso</th></thead>
        <tbody>";
    $row=1;
    if (($handle = fopen("motifs.csv", "r")) !== FALSE) {
	    while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
	        $num = count($data);
	        $row++;
	        $html.="<tr>";
	        
	        for ($c=0; $c < $num-1; $c++) {
	            $html.="<td>".$data[$c] . "</td>\n";
	        }
	        $html.="</tr>\n";
	    }
	    $html." </tbody></table></div></div>";
	    echo $html;
	    fclose($handle);
	}
	else{
		echo "No se encontraron datos en el servidor";
	}	
}

function obtenCaminos(){
	//$txtpatr1=$_GET["inPatron"];
	$txtpatr1="TTTW";//"GRCGHCVSWNTGTCTG";
	//$txtDistancia=(floatval( $_GET["distancia"]))*0.01;
	//$txtNpares=intval($_GET["nPares"]);
	//$txtConservacion=(floatval($_GET["conservacion"]))*0.01;

	//DnaJ-1_melanogaster
	$f1="TTTCGGTAGTCAAATGTTTTTTTTTTATTCTTTTTACGAAATTTTACACACAAAAGGCTGCTTCTGTTCTGGACAGAACGTCAGAAATGACGTTGCAGTTCTGCTAGGATTTGACATTTCAAATGAAATGTCAGTACAGGGCCTACTATTTCGATTATTCCTAAAACTTCTAGAGTTCATAGTAATATATAATATAATATGTATATAATTTAATATAATAAATAGTATAATATATAATATACTCACTTATTCCCACTTGAATTCCAGAAAGAGTTGAATTTTTGTATTCTTATTTGCACTTTCACTCACTTTTGGCCAGTAGAGCGTTTCATTTTTCACTTGACTTGAAGCCTAACGCGTGACGCACGCGCACAACTCTAGAATTTAAACGCACGTTTTAATTGTTGACCGCTTTGAATGAGGGACCGAGCGGGGGTGAACTGAGAAAGCTGTGATAAGAATGCAGCAGCGTGGCCGGCTCAAAGTACTAAATCCCCTAAGCTCATTTCAAAAAACGAGAGCGAAAGCTTGTTGTCGAACAATTGTTTACATATGTATGTATGTGAAGAGCGATAAAAGTGCATGCTCAAGGCTCTGCTTTGAAATCGACCTTTGTTTCTGTGTTTATCTTATCTCTCCCCATCTCATAGCAAAAGCGAGAGGGAAGAAGAGCATAATTCTCGCACATCGCTTTCTGTCGCTGTTAGCTCGCTGCTTAATTAACATCCATCTGTAACGACAGTAGAGCATTGGTTCTTTCTCTGTTAGCTCATTGAACACTATGCAGGGAATTCTGTTGAATATTACATAGTGTTTTCCTGTTGTCCCTCTTATCTGAACAATACTGATTTAAATGTTGGCGCTTAGAAGAAGAACGTTTGCATGCTAGCGCATGCATTCTACAATCCCTAAGTGTGGCCGCATTACAATCAATGATAGTCGATAGCATCGTGCAGTCAGATTTCCGTAGTCAGTATTTCAAGAACTCCCGCCTTCTTATCGGTTGTATCAGCGCTGTCATTCCACTGCAACTCTAAGCTGCGAGAAACATCGAGATATTTCGATGGGTAGACGGACTTCGGGCGATAGGCCATTTACGGTATACTATATACCTTTCTGTATATTGTGACGTCGATAAACTTTCATACGCTCTCTAACATAGTGCTTCCTTACATTATTTATTCCACAGGAGTGCATTTGTATCCTTTTCACTCATTCATTTTCAAGCAATTCCACTTTGGCGCGCAGTCGATAGTATCGATAGCCGTTTCTGTGAATTAATCATACTTAGGTTGACTCTTTTGCTTGAACCTTTTTTAGACACAGTCAAAAAAAGAAAACATCCTTAAATAGGACCATTCTTGAACAAAATTGATTCATCTATCGAAGAAAATTATGTCCTTAGGGCTGACAGTCCTAGATAGCTGATAATATTCAGCCGAATATCAAAATCGAGGAATACGATTTCCGATTATGGACAGAGAACGATTAACCCATTGTATTAAAATAAGCTCCACGAAAAAAATTAAATTCGAAGAATTTAGCGCAGTTCCGGTAAAAAATTTGGTAGTCATTATTTTTGTGTAAGAAAAAAAATATAAATATATTTACAAAGTATTTCCAAACAGTAGTATTTGCCATGGGTTACTGTAGCTGTCCACATAATTATATGAATGGGGGGCCTAAGTGGGTTAAGTTCTCCAAGCAGCGAGAAACATCGAGAAAATTCGACGAGCAGACGGAACAGAGTCTATATAAAGGCCTGCGATATTCGGGCGACAAACAAAAAAATTTTATCGACTGAGCAACAAGGGTGTGTGCTAACACAGCAAACGAGAAAAAAAATAAAATTGATTGAGAACGTCATCTATTATTTTCAAGAACGTGTAATATATATATATAAATAATACAAACTCGTACAACAGGAGAAAGAAAATTGAAAAGTGAAGTGGAAATAGTTTTAGCAAAGAGAAAACAGCATTTTAGGTGAGTAGTTTGTGGCAAAATGGAATTGATACTTTAAATTAACATATTCGCATGGCATTCCCAAATGCCTAATGTATGGTGTGTGATGTGTGGTGTGTGGGAGAATATTATATTAGTGACATGCACAGGGGCGGGCGGACGACGTAGCTCGTGGGGGAAAAATGACAACACATCAGCACCAGCACCAACCCAAGCGAAAGCACAGGGGCTGTGTCGTTGCACAACTCGGTGTTCTAGAAAATTCCATTGAAAAAACAATCGAAGCGAAGTGGTAATCAGTACACATGTTCTATAATATTCTCTGTATTCTCTGTTCGCTTTCAGGTTGAAAGAGACTGAACAAG";
//	$f1="AAATACTAAACGCATTGCAGCTGTGGCAATGCCCAAGTCTTGGTCTTACGGTCACACTGGCAAAGTTTAAAAATTTATTTATTTCAACTTTCAGTTACTTTTCGTTGGCTTGAATATTACACTAAGAATTCAATTTGACACTTGCAATTTATACATTGTATATTATAATATATTATATGTATTATATTTTATATCATATAAAGATATTTATATCTATTGATCTTTTGATTATAAGCTCTTTGGTTGAACAATATAAGTCAGACTTACACGAAACATTCCAGAACCGATAGTTTTATGCGATATATGAGATTTAAGGAGTACTTTCCGCATTTCGCCATCACAGTCACGCTTTCCTTGGCATTTGCAATCAAATAAGCGCTAATAATAATCGTAAAAGCATAAGAAGCATATAAAGAAGAGTCACCGCCAAAAGCATGCACAAATATATATAAATGGGGAGCGATTTAAAAACAGTGCACTGTGTTTAAAACATCGACAGCTATCGGTTAGCATATCGATATTGACATTCGCAGTCAAACGTTTTCGAGATACAACCCTAAAATCCGAGAAGCATCCAGAAATTT";
	//>GA10408_D_pseudoobscura
	$f2="ACACATGTGATTGCTTAAGTGCGAAAAACTAGTTCAAGCTTTGCGTCCTTCAACGTCTTGGCCAAATGTCGGAAAACTTGCGGCTCCAAAATATGCTCGTTCACACATACACACATTTATATGTAGGCATACAGATACACATACATATGTATGATTTCACTCACCTGAACTGTGAAAATGTTGCAATATTGTGTTAGGGTTAAATGCACAATCCGGCCCAAGGGCTGGGACTACACAGGCCAATTGATTTGTTGCTATCTAAACTGTTTAAACGGAGGATGCTTGACGTTGATACCGAGCAGCAACCATTTTTATAAATGAAACAAATGTTTTTTGTTGTTCTGCTGCGGTTTGGCTGCAGTTCTATCGATGGCAATACCGATAAGCCTGCCTGCTATCGATGGTTATCCGATAGTTCCATCAGTCACCCTACACAAAGTATCGATGCTACGGCTGCAATTCGATTCAAATCAAATCGATTATTGATTTGTAACAAACGCAGTTAATTGACACACTATAATCCACAAATCAATAACCCATGCTTATTTAAATTCAATTTATCAACTAACATGCAATTTTTATGTTCTTAGCAAAATGATTTAAATATTTGAATTTTGGCGCTATATGTTATCGAACCGTTGTGTTCCGGATGCAACCCTATTATGCTAGAAGCATCGAGAATTTTCGACGAGCAGACTGCTCCGAGTCTATATAAAGGCAACATCCGTTGCCAGTTCGACTCATTTAGCAAAAATCAAGAGAAACGAGTAGTGGGTGTGTTTTCACACTAGATAAAAAAAACCAGAACTATTGATTAAAACCAATATAATTTCAAGAATATAGTGCATTTTTCAACTGCAATTCATAGAAATTCAAGTAATAATCAAATCGGAAAGTTAATTTACAAGAAAAAAGTAAAATAAAAAAAAAAAAAATAGCACGCAGCTGCAAAACAAAAAAGGTATGTAGGGCCTAACACATTAATTGTTGCTTAAATTAGCTTGTTTTCACTTGAAAACAAACTGCATTTAATGAACTTTAAAGCAAGAGATAAAATGAAAAGCCAAACAAGCAATACAATACAGTGAAATGTGAAATTTAAATCCCAAAACACAGCGGCGTCGACGTCACGCCCAGATTGACAACACATCAGCTTTTCGCTGGCGTTGTCTTTGTCGTTGCACAACTCAAAGTTTCTAGCAATTTCCATTGGGCGACGCGTTGAAAAAACAATCGACATATTTGTCTCTGCTGTTTTAGCTTTGCGTTTATAAATAAGTACATATATCAGTAGAATAATTGTGTGCTTTCTATTCTTTTTTCGCAGTTTGTAAGTGCGCGGCGTCAAATTAAAGCATA";

	//$f2="TTTCGGTAGTCAAATGTTTTTTTTTTATTCTTTTTACGAAATTTTACACACAAAAGGCTGCTTCTGTTCTGGACAGAACGTCAGAAATGACGTTGCAGTTCTGCTAGGATTTGACATTTCAAATGAAATGTCAGTACAGGGCCTACTATTTCGATTATTCCTAAAACTTCTAGAGTTCATAGTAATATATAATATAATATGTATATAATTTAATATAATAAATAGTATAATATATAATATACTCACTTATTCCCACTTGAATTCCAGAAAGAGTTGAAGTTTCTGTGTTTATCTTATCTCTCCCCATCTCATAGCAAAAGCGAGAGGGAAGAAGAGCATAATTCTCGCACATCGCTTTCTGTCGCTGTTAGCTCGCTGCTTAATTAACATCCATCTGTAACGACAGTAGAGCATTGGTTCTTTCTCTGTTAGCTCATTGAACACTATGCAGGGAATTCTGTT";
	//>GJ11949_Dvirilis
	$f3 = "AAATACTAAACGCATTGCAGCTGTGGCAATGCCCAAGTCTTGGTCTTACGGTCACACTGGCAAAGTTTAAAAATTTATTTATTTCAACTTTCAGTTACTTTTCGTTGGCTTGAATATTACACTAAGAATTCAATTTGACACTTGCAATTTATACATTGTATATTATAATATATTATATGTATTATATTTTATATCATATAAAGATATTTATATCTATTGATCTTTTGATTATAAGCTCTTTGGTTGAACAATATAAGTGCAACTTTCTCCATCACCTTCCTATCTTTTTACAATATGCTTACCTCGTCAATACGTTTTTTCTATTTCAAATATTTCAATATTTCAAAGAAATATTTTGTTTATTTTTCTGTGTGTTTTTAAGCAATCTGACCCCTGTAGAAGAATCCCTTATAATATTAACAAATGTATCCTCAAAATAGATCGATCTCTATCTTCGCAGACTTACACGAAACATTCCAGAACCGATAGTTTTATGCGATATATGAGATTTAAGGAGTACTTTCCGCATTTCGCCATCACAGTCACGCTTTCCTTGGCATTTGCAATCAAATAAGCGCTAATAATAATCGTAAAAGCATAAGAAGCATATAAAGAAGAGTCACCGCCAAAAGCATGCACAAATATATATAAATGGGGAGCGATTTAAAAACAGTGCACTGTGTTTAAAACATCGACAGCTATCGGTTAGCATATCGATATTGACATTCGCAGTCAAACGTTTTCGAGATACAACCCTAAAATCCGAGAAGCATCCAGAAATTT";
	//$f3="CTCCGAGTCTATATAAAGGCAACATCCGTTGCCAGTTCGACTCATTTAGCAAAAATCAAGAGAAACGAGTAGTGGGTGTGTTTTCACACTAGATAAAAAAAACCAGAACTATTGATTAAAACCAATATAATTTCAAGAATATAGTGCATTTTTCAACTGCAATTCATAGAAATTCAAGTAATAATCAAATCGGAAAGTTAATTTACAAGAAAAAAGTAAAATAAAAAAAAAAAAAATAGCACGCAGCTGCAAAACAAAAAAGGTATGTAGGGCCTAACACATTAATTGTTGCTTAAATTAGCTTGTTTTCACTTGAAAACAAACTGCATTTAATGAACTTTAAAGCAAGAGATAAAATGAAAAGCCAAACAAGCAATACAATACAGTGAAATGTGAAATTTAAATCCCAAAACACAGCGGCGTCGACGTCACGCCCAGATTGACAACACATCAGCTTTTCGCTGGCGTTGTCTTTGTCGTTGCACAACTCAAAGTTTCTAGCAATTTCCATTGGGCGACGCGTTGAAAAAACAATCGACATATTTGTCTCTGCTGTTTTAGCTTTGCGTTTATAAATAAGTACATATATCAGTAGAATAATTGTGTGCTTTCTATTCTTTTTTCGCAGTTTGTAAGTGCGCGGCGTCAAATTAAAGCATA";
	$f4="TCAAAGAAATATTTTGTTTATTTTTCTGTGTGTTTTTAAGCAATCTGACCCCTGTAGAAGAATCCCTTATAATATTAACAAATGTATCCTCAAAATAGATCGATCTCTATCTTCGCAGACTTACACGAAACATTCCAGAACCGATAGTTTTATGCGATATATGAGATTTAAGGAGTACTTTCCGCATTTCGCCATCACAGTCACGCTTTCCTTGGCATTTGCAATCAAATAAGCGCTAATAATAATCGTAAAAGCATAAGAAGCATATAAAGAAGAGTCACCGCCAAAAGCATGCACAAATATATATAAATGGGGAGCGATTTAAAAACAGTGCACTGTGTTTAAAACATCGACAGCTATCGGTTAGCATATCGATATTGACATTCGCAGTCAAACGTTTTCGAGATACAACCCTAAAATCCGAGAAGCATCCAGAAATTT";

	$f5="AAATACTAAACGCATTGCAGCTGTGGCAATGCCCAAGTCTTGGTCTTACGGTCACACTGGCAAAGTTTAAAAATTTATTTATTTCAACTTTCAGTTACTTTTCGTTGGCTTGAATATTACACTAAGAATTCAATTTGACACTTGCAATTTATACATTGTATATTATAATATATTATATGTATTATAGTGCAACTTTCTCCATCACCTTCCTATCTTTTTACAATATGCTTACCTCGTCAATACGTTTTTTCTATTTCATATGCGATATATGAGATTTAAGGAGTACTTTCCGCATTTCGCCATCACAGTCACGCTTTCCTTGGCATTTGCAATCAAATAAGCGCTAATAATAATCGTAAAAGCATAAGAAGCATATAAAGAAGAGTCACCGCCAAAAGCATGCACAAATATATATAAATGGGGAGCGATTTAAAAACAGTGCACTGTGTTTAAAACATCGACAGCTATCGGTTAGCATATCGATATTGACATTCGCAGTCAAACGTTTTCGAGATACAACCCTAAAATCCGAGAAGCATCCAGAAATTT";

	$f6="ATATTATAATATATTATATGTATTATATTTTATATCATATAAAGATATTTATATCTATTGATCTTTTGATTATAAGCTCTTTGGTTGAACAATATAAGTGCAACTTTCTCCATCACCTTCCTATCTTTTTACAATATGCTTACCTCGTCAATACGTTTTTTCTATTTCAAATATTTCAATATTTCAAAGAAATATTTTGTTTATTTTTCTGTGTGTTTTTAAGCAATCTGACCCCTGTAGAAGAATCCCTTATAATATTAACAAATGTATCCTCAAAATAGATCGATCTCTATCTTCGCAGACTTACACGAAACATTCCAGAACCGATAGTTTTATGCGATATATGAGATTTAAGGAGTACTTTCCGCA";
	
	$f7="CTCCGAGTCTATAAAGAGAAACGAGTAGTGGGTGTGTTTTCACACTAGATAAAAAAAACCAGAACTATTGATTAAAACCAATATAATTTCAAGAATATAGTGCATTTTTCAACTGCAATTCATAGAAATTCAAGTAATAATCAAATCGGAAAGTTAATTTACAAGAAAAAAGTAAAATAAAAAAAAATTTAATGAACTTTAAAGCAAGAGATAAAATGAAAAGCCAAACAAGCAATACAATACAGTGAAATGTGAAATTTAAATCCCAAAACACAGCGGCGTCGACGTCACGCCCAGATTGACAACACATCAGCTTTTCGCTGGCGTTGTCTTTGTCGTTAATAAGTACATATATCAGTAGAATAATTGTGTGCTTTCTATTCTTTTTTCGCAGTTTGTAAGTGCGCGGCGTCAAATTAAAGCATA";
	
	$distancia = 25; //%
	$radioPB = 25;

	//Fase 1
	//$seq = array($f1,$f2,$f3,$f4,$f5,$f6,$f7);
	$seq = array($f1,$f2,$f3);
	$motifs = new MotifsTree(count($seq),$seq,$distancia, $radioPB);
	$v= $motifs->getMotifs();


	//Fase 2
	echo "<br>Prueba de combinatorias<br>";
	$motifs->generateMotifsPaths();

	
	/*
	//Fase 3 y 4
	$seqsComb = $motifs->getStringPaths();
	foreach ($seqsComb as $sseq) {
		foreach ($sseq as $seq) {
					echo $seq ."<br>";
		}
		echo "<br>";
	}
	*/
	//falta documentar codigo
	//ya se tienen todos los caminos,hallar el mejor gaussiano
}

//obtenCaminos();

?>
